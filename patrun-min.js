/* Copyright (c) 2013 Richard Rodger, MIT License, https://github.com/rjrodger/patrun */
"use strict";(function(){var e=this,n=e.patrun,r="undefined"!=typeof require,t=e._,u=e.gex;if("undefined"==typeof t){if(!r)throw new Error("patrun requires underscore, see http://underscorejs.org");t=require("underscore")}if("undefined"==typeof u){if(!r)throw new Error("patrun requires gex, see https://github.com/rjrodger/gex");u=require("gex")}var i=e.patrun=function(){var r={},i={};return r.noConflict=function(){return e.previous_patrun=n,r},r.add=function(e,n){for(var u,o=t.keys(e).sort(),s=i,v=0;v<o.length;v++){var d=o[v],f=e[d];if(null!==f&&void 0!==f)if(u=s.v,u&&d==s.k)s=u[f]||(u[f]={});else if(s.k)if(d<s.k){var a=s.v,l=s.s;s.v={},s.s={k:s.k,v:a,s:l},s.k=d,s=s.v[f]={}}else u=s.v,s=s.s||(s.s={}),v--;else s.k=d,s.v={},s=s.v[f]={}}return void 0!==n&&s&&(s.d=n),r},r.find=function(e){var n,r=i,u=null;do if(n=r.k,r.v){var o=r.v[e[n]];o?(u=o.d,r=o):r=r.s}else r=null;while(r);return null===u&&0===t.keys(e).length&&void 0!==i.d&&(u=i.d),u},r.remove=function(e){var n,r=i,t=null,u=[];do if(n=r.k,r.v){var o=r.v[e[n]];o?(u.push({km:r,v:e[n]}),t=o.d,r=o):r=r.s}else r=null;while(r);if(void 0!==t){var s=u[u.length-1];s&&s.km&&s.km.v&&delete s.km.v[s.v]}},r.findall=function(e){function n(r,i,o,s){if(r.v){var v=r.k,d=u(e[v]);for(var f in r.v){var a=t.extend({},i),l=t.extend({},o);if(d.on(f)){a[v]=f,delete l[v];var p=r.v[f];0==t.keys(l).length&&p&&p.d?s.push({match:a,data:p.d}):p&&p.v&&n(p,t.extend({},a),t.extend({},l),s)}}var p=r.s;p&&n(p,t.extend({},a),t.extend({},l),s)}}var r=[];return n(i,{},t.extend({},e),r),r},r.toString=function(e){function n(e,n){for(var r=0;n>r;r++)e.push(" ")}function r(t,u,i,o){if(void 0!==t.d&&(n(u,i),u.push(e(t.d))),t.k&&(u.push("\n"),n(u,i),u.push(t.k+":")),t.v){i++;for(var o in t.v)u.push("\n"),n(u,i),u.push(o+" ->"),r(t.v[o],u,i+1,o);t.s&&(u.push("\n"),n(u,i),u.push("* ->"),r(t.s,u,i+1,o))}}e=t.isFunction(e)?e:function(e){return t.isFunction(e)?"<"+e.name+">":"<"+e+">"};var u=[];return r(i,u,0,""),u.join("")},r.inspect=r.toString,r.toJSON=function(e){return JSON.stringify(i,function(e,n){return t.isFunction(n)?"[Function]":n},e)},r};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.patrun=i):e.patrun=i}).call(this);
//# sourceMappingURL=patrun-min.map