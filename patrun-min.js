/* Copyright (c) 2013 Richard Rodger, MIT License, https://github.com/rjrodger/patrun */
"use strict";(function(){var e=this,n=e.patrun,r="undefined"!=typeof require,t=e._,i=e.gex;if("undefined"==typeof t){if(!r)throw new Error("patrun requires underscore, see http://underscorejs.org");t=require("underscore")}if("undefined"==typeof i){if(!r)throw new Error("patrun requires gex, see https://github.com/rjrodger/gex");i=require("gex")}var u=e.patrun=function(){var r={},u={};return t.noConflict=function(){return e._=n,r},r.add=function(e,n){for(var i,o=t.keys(e).sort(),s=u,v=0;v<o.length;v++){var d=o[v],f=e[d];if(null!==f&&void 0!==f)if(i=s.v,i&&d==s.k)s=i[f]||(i[f]={});else if(s.k)if(d<s.k){var a=s.v,l=s.s;s.v={},s.s={k:s.k,v:a,s:l},s.k=d,s=s.v[f]={}}else i=s.v,s=s.s||(s.s={}),v--;else s.k=d,s.v={},s=s.v[f]={}}return void 0!==n&&s&&(s.d=n),r},r.find=function(e){var n,r=u,i=null;do if(n=r.k,r.v){var o=r.v[e[n]];o?(i=o.d,r=o):r=r.s}else r=null;while(r);return null===i&&0===t.keys(e).length&&void 0!==u.d&&(i=u.d),i},r.remove=function(e){var n,r=u,t=null,i=[];do if(n=r.k,r.v){var o=r.v[e[n]];o?(i.push({km:r,v:e[n]}),t=o.d,r=o):r=r.s}else r=null;while(r);if(void 0!==t){var s=i[i.length-1];s&&s.km&&s.km.v&&delete s.km.v[s.v]}},r.findall=function(e){function n(r,u,o,s){if(r.v){var v=r.k,d=i(e[v]);for(var f in r.v){var a=t.extend({},u),l=t.extend({},o);if(d.on(f)){a[v]=f,delete l[v];var p=r.v[f];0==t.keys(l).length&&p&&p.d?s.push({match:a,data:p.d}):p&&p.v&&n(p,t.extend({},a),t.extend({},l),s)}}var p=r.s;p&&n(p,t.extend({},a),t.extend({},l),s)}}var r=[];return n(u,{},t.extend({},e),r),r},r.toString=function(e){function n(e,n){for(var r=0;n>r;r++)e.push(" ")}function r(t,i,u,o){if(void 0!==t.d&&(n(i,u),i.push(e(t.d))),t.k&&(i.push("\n"),n(i,u),i.push(t.k+":")),t.v){u++;for(var o in t.v)i.push("\n"),n(i,u),i.push(o+" ->"),r(t.v[o],i,u+1,o);t.s&&(i.push("\n"),n(i,u),i.push("* ->"),r(t.s,i,u+1,o))}}e=t.isFunction(e)?e:function(e){return t.isFunction(e)?"<"+e.name+">":"<"+e+">"};var i=[];return r(u,i,0,""),i.join("")},r.inspect=r.toString,r.toJSON=function(e){return JSON.stringify(u,function(e,n){return t.isFunction(n)?"[Function]":n},e)},r};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.patrun=u):e.patrun=u}).call(this);
//# sourceMappingURL=patrun-min.map